'use strict';

var cov_xx1pxqvqs = function () {
    var path = 'C:\\Users\\kingsley\\Desktop\\Events-Manager\\server\\models\\event.js',
        hash = '13c20b132f6339774d1ba1cb4b4d027c911aa4c9',
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
        path: 'C:\\Users\\kingsley\\Desktop\\Events-Manager\\server\\models\\event.js',
        statementMap: {
            '0': {
                start: {
                    line: 2,
                    column: 14
                },
                end: {
                    line: 2,
                    column: 25
                }
            },
            '1': {
                start: {
                    line: 4,
                    column: 0
                },
                end: {
                    line: 136,
                    column: 2
                }
            },
            '2': {
                start: {
                    line: 5,
                    column: 18
                },
                end: {
                    line: 115,
                    column: 6
                }
            },
            '3': {
                start: {
                    line: 24,
                    column: 24
                },
                end: {
                    line: 27,
                    column: 25
                }
            },
            '4': {
                start: {
                    line: 25,
                    column: 28
                },
                end: {
                    line: 25,
                    column: 118
                }
            },
            '5': {
                start: {
                    line: 26,
                    column: 28
                },
                end: {
                    line: 26,
                    column: 40
                }
            },
            '6': {
                start: {
                    line: 75,
                    column: 20
                },
                end: {
                    line: 78,
                    column: 21
                }
            },
            '7': {
                start: {
                    line: 76,
                    column: 24
                },
                end: {
                    line: 76,
                    column: 76
                }
            },
            '8': {
                start: {
                    line: 77,
                    column: 24
                },
                end: {
                    line: 77,
                    column: 36
                }
            },
            '9': {
                start: {
                    line: 88,
                    column: 20
                },
                end: {
                    line: 91,
                    column: 21
                }
            },
            '10': {
                start: {
                    line: 89,
                    column: 24
                },
                end: {
                    line: 89,
                    column: 83
                }
            },
            '11': {
                start: {
                    line: 90,
                    column: 24
                },
                end: {
                    line: 90,
                    column: 36
                }
            },
            '12': {
                start: {
                    line: 117,
                    column: 4
                },
                end: {
                    line: 134,
                    column: 5
                }
            },
            '13': {
                start: {
                    line: 118,
                    column: 8
                },
                end: {
                    line: 125,
                    column: 11
                }
            },
            '14': {
                start: {
                    line: 126,
                    column: 8
                },
                end: {
                    line: 133,
                    column: 11
                }
            },
            '15': {
                start: {
                    line: 135,
                    column: 4
                },
                end: {
                    line: 135,
                    column: 17
                }
            }
        },
        fnMap: {
            '0': {
                name: '(anonymous_0)',
                decl: {
                    start: {
                        line: 4,
                        column: 17
                    },
                    end: {
                        line: 4,
                        column: 18
                    }
                },
                loc: {
                    start: {
                        line: 4,
                        column: 43
                    },
                    end: {
                        line: 136,
                        column: 1
                    }
                },
                line: 4
            },
            '1': {
                name: '(anonymous_1)',
                decl: {
                    start: {
                        line: 23,
                        column: 39
                    },
                    end: {
                        line: 23,
                        column: 40
                    }
                },
                loc: {
                    start: {
                        line: 23,
                        column: 50
                    },
                    end: {
                        line: 28,
                        column: 21
                    }
                },
                line: 23
            },
            '2': {
                name: '(anonymous_2)',
                decl: {
                    start: {
                        line: 74,
                        column: 36
                    },
                    end: {
                        line: 74,
                        column: 37
                    }
                },
                loc: {
                    start: {
                        line: 74,
                        column: 47
                    },
                    end: {
                        line: 79,
                        column: 17
                    }
                },
                line: 74
            },
            '3': {
                name: '(anonymous_3)',
                decl: {
                    start: {
                        line: 87,
                        column: 24
                    },
                    end: {
                        line: 87,
                        column: 25
                    }
                },
                loc: {
                    start: {
                        line: 87,
                        column: 35
                    },
                    end: {
                        line: 92,
                        column: 17
                    }
                },
                line: 87
            },
            '4': {
                name: '(anonymous_4)',
                decl: {
                    start: {
                        line: 117,
                        column: 22
                    },
                    end: {
                        line: 117,
                        column: 23
                    }
                },
                loc: {
                    start: {
                        line: 117,
                        column: 34
                    },
                    end: {
                        line: 134,
                        column: 5
                    }
                },
                line: 117
            }
        },
        branchMap: {
            '0': {
                loc: {
                    start: {
                        line: 24,
                        column: 24
                    },
                    end: {
                        line: 27,
                        column: 25
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 24,
                        column: 24
                    },
                    end: {
                        line: 27,
                        column: 25
                    }
                }, {
                    start: {
                        line: 24,
                        column: 24
                    },
                    end: {
                        line: 27,
                        column: 25
                    }
                }],
                line: 24
            },
            '1': {
                loc: {
                    start: {
                        line: 75,
                        column: 20
                    },
                    end: {
                        line: 78,
                        column: 21
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 75,
                        column: 20
                    },
                    end: {
                        line: 78,
                        column: 21
                    }
                }, {
                    start: {
                        line: 75,
                        column: 20
                    },
                    end: {
                        line: 78,
                        column: 21
                    }
                }],
                line: 75
            },
            '2': {
                loc: {
                    start: {
                        line: 88,
                        column: 20
                    },
                    end: {
                        line: 91,
                        column: 21
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 88,
                        column: 20
                    },
                    end: {
                        line: 91,
                        column: 21
                    }
                }, {
                    start: {
                        line: 88,
                        column: 20
                    },
                    end: {
                        line: 91,
                        column: 21
                    }
                }],
                line: 88
            }
        },
        s: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0
        },
        f: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0
        },
        b: {
            '0': [0, 0],
            '1': [0, 0],
            '2': [0, 0]
        },
        _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
        return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
}();

var _ValidationService = require('../services/ValidationService');

var _ValidationService2 = _interopRequireDefault(_ValidationService);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var error = (cov_xx1pxqvqs.s[0]++, new Error());

cov_xx1pxqvqs.s[1]++;
module.exports = function (sequelize, DataTypes) {
    cov_xx1pxqvqs.f[0]++;

    var Event = (cov_xx1pxqvqs.s[2]++, sequelize.define('Event', {
        eventId: {
            type: DataTypes.INTEGER,
            allowNull: false,
            autoIncrement: true,
            primaryKey: true
        },
        title: {
            type: DataTypes.STRING,
            allowNull: false,
            name: {
                type: DataTypes.STRING,
                allowNull: false,
                validate: {
                    notEmpty: {
                        args: true,
                        msg: 'Event title cannot be empty!'
                    },
                    isValidCenterName: function isValidCenterName(value) {
                        cov_xx1pxqvqs.f[1]++;
                        cov_xx1pxqvqs.s[3]++;

                        if (!_ValidationService2.default.isValidName(value)) {
                            cov_xx1pxqvqs.b[0][0]++;
                            cov_xx1pxqvqs.s[4]++;

                            error.message = 'Event title can only contain letters, numbers and these characters -,\'';
                            cov_xx1pxqvqs.s[5]++;
                            throw error;
                        } else {
                            cov_xx1pxqvqs.b[0][1]++;
                        }
                    }
                }
            }
        },
        date: {
            type: DataTypes.STRING,
            allowNull: false,
            validate: {
                notEmpty: {
                    args: true,
                    msg: 'Event date cannot be empty!'
                }
            }
        },
        time: {
            type: DataTypes.STRING,
            allowNull: false,
            validate: {
                notEmpty: {
                    args: true,
                    msg: 'Event time cannot be empty!'
                }
            }
        },
        estimatedGuests: {
            type: DataTypes.INTEGER,
            allowNull: false,
            validate: {
                notEmpty: {
                    args: true,
                    msg: 'Estimated guest cannot be empty!'
                },
                isInt: {
                    args: true,
                    msg: 'Estimated guests must be an integer value'
                }
            }
        },
        description: {
            type: DataTypes.STRING,
            allowNull: false,
            validate: {
                notEmpty: {
                    args: true,
                    msg: 'Description cannot be empty!'
                },
                isValidDescription: function isValidDescription(value) {
                    cov_xx1pxqvqs.f[2]++;
                    cov_xx1pxqvqs.s[6]++;

                    if (!_ValidationService2.default.isString(value)) {
                        cov_xx1pxqvqs.b[1][0]++;
                        cov_xx1pxqvqs.s[7]++;

                        error.message = 'Please, enter a valid description!';
                        cov_xx1pxqvqs.s[8]++;
                        throw error;
                    } else {
                        cov_xx1pxqvqs.b[1][1]++;
                    }
                }
            }
        },
        approval: {
            type: DataTypes.BOOLEAN,
            allowNull: false,
            defaultValue: false,
            validate: {
                isBool: function isBool(value) {
                    cov_xx1pxqvqs.f[3]++;
                    cov_xx1pxqvqs.s[9]++;

                    if (!_ValidationService2.default.isBoolean(value)) {
                        cov_xx1pxqvqs.b[2][0]++;
                        cov_xx1pxqvqs.s[10]++;

                        error.message = 'Please, enter true or false for approval';
                        cov_xx1pxqvqs.s[11]++;
                        throw error;
                    } else {
                        cov_xx1pxqvqs.b[2][1]++;
                    }
                }
            }
        },
        centerId: {
            type: DataTypes.INTEGER,
            allowNull: false,
            validate: {
                is: {
                    args: /^[1-9]+$/,
                    msg: 'Requires a positive integer value'
                }
            }
        },
        userId: {
            type: DataTypes.INTEGER,
            allowNull: false,
            validate: {
                is: {
                    args: /^[1-9]+$/,
                    msg: 'Requires a positive integer value'
                }
            }
        }
    }));

    cov_xx1pxqvqs.s[12]++;
    Event.associate = function (models) {
        cov_xx1pxqvqs.f[4]++;
        cov_xx1pxqvqs.s[13]++;

        Event.belongsTo(models.Center, {
            foreignKey: {
                name: 'centerId',
                allowNull: false,
                onDelete: 'SET NULL',
                onUpdate: 'CASCADE'
            }
        });
        cov_xx1pxqvqs.s[14]++;
        Event.belongsTo(models.User, {
            foreignKey: {
                name: 'userId',
                allowNull: false,
                onDelete: 'CASCADE',
                onUpdate: 'CASCADE'
            }
        });
    };
    cov_xx1pxqvqs.s[15]++;
    return Event;
};